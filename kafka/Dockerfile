FROM registry.cn-qingdao.aliyuncs.com/metersphere/kafka:2
MAINTAINER zhangz@goodrain.com

ENV TZ=Asia/Shanghai

ENV KAFKA_CFG_ZOOKEEPER_CONNECT=127.0.0.1:2181
ENV ALLOW_PLAINTEXT_LISTENER=yes
ENV KAFKA_INTER_BROKER_LISTENER_NAME=INTERNAL
ENV KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=INTERNAL:PLAINTEXT,EXTERNAL:PLAINTEXT
ENV KAFKA_CFG_LISTENERS=INTERNAL://:9092,EXTERNAL://:19092
ENV KAFKA_CFG_ADVERTISED_LISTENERS=INTERNAL://127.0.0.1:9092,EXTERNAL://`$(hostname -I|cut -d" " -f 1)`:19092
ENV KAFKA_CFG_LOG_RETENTION_HOURS=64


EXPOSE 9092 19092
VOLUME [ "/bitnami" ]
